!function(e){function n(o){if(r[o])return r[o].exports;var s=r[o]={exports:{},id:o,loaded:!1};return e[o].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}var r={};return n.m=e,n.c=r,n.p="",n(0)}([function(e,n,r){r(1),window.DustPressComments=function(e,n,r){var o={};return o.listeners=[],o.cache=function(){o.postId=comments.post_id,o.formId="#"+comments.form_id,o.statusId="#"+comments.status_id,o.replyLabel=comments.reply_label,o.$section=r("#comments__section"),o.$formContainer=o.$section.find(o.formId+"__container"),o.$commentForm=o.$section.find(o.formId),o.$replyLinks=o.$section.find("a.comment-reply-link"),o.$statusDiv=o.$commentForm.find(o.statusId),o.$identifier=o.$commentForm.find("#dustpress_comments_identifier"),o.cacheMessageBoxes()},o.cacheMessageBoxes=function(e,n){e?(o.$successBox=n.find("#comments__success_"+e),o.$errorBox=n.find("#comments__error_"+e),o.$warningBox=n.find("#comments__warning_"+e)):(o.$successBox=o.$formContainer.find("#comments__success"),o.$errorBox=o.$formContainer.find("#comments__error"),o.$warningBox=o.$formContainer.find("#comments__warning"))},o.init=function(){o.cache(),r.each(o.$replyLinks,o.removeReplyLink),o.listen(),o.displayMessages(),o.addIdentifier()},o.addListener=function(e){o.listeners.push(e)},o.fireListeners=function(){r.each(o.listeners,function(e,n){n.call()})},o.listen=function(){o.$replyLinks.on("click",function(e){o.stop(e),o.hideMessages(),o.addReplyForm(e.target)}),o.$commentForm.submit(o.submit),o.$section.find(".close").on("click",function(e){o.stop(e),o.hideMessages()})},o.addReplyForm=function(e){o.$closest=r(e).closest(".comment");var n=o.$closest.data("id");o.clearReplyForm(),o.$replyForm=o.$formContainer.clone(!0),o.$formContainer.hide();var s=o.$replyForm.find("#reply-title small");o.$replyForm.find("#reply-title").html(o.replyLabel).append(s),o.$replyForm.find("#comment_parent").val(n),o.$replyForm.find("#comments__success").attr("id","comments__success_"+n),o.$replyForm.find("#comments__error").attr("id","comments__error_"+n),o.$replyForm.find("#comments__warning").attr("id","comments__warning_"+n),o.$closest.append(o.$replyForm),o.$replyForm.show(),o.cacheMessageBoxes(n,o.$replyForm),o.$cancelReplyLink=o.$replyForm.find("#cancel-comment-reply-link"),o.$cancelReplyLink.on("click",o.cancelReply),o.$cancelReplyLink.show()},o.cancelReply=function(e){o.stop(e),o.clearReplyForm(),o.cacheMessageBoxes(),o.$formContainer.show()},o.removeReplyLink=function(e,n){n.setAttribute("onclick",null)},o.submit=function(){var e=new FormData(this);return r.ajax({url:o.$commentForm.attr("action"),type:"POST",data:e,success:function(e){"object"!=typeof e&&(e=JSON.parse(e)),e.success?o.handleSuccess(e):o.handleError(e)},cache:!1,contentType:!1,processData:!1}),!1},o.displayMessages=function(){o.$successBox.hasClass("display")&&o.$successBox.show(),o.$errorBox.hasClass("display")&&o.$errorBox.show(),o.$warningBox.hasClass("display")&&o.$warningBox.show()},o.hideMessages=function(){o.$successBox.removeClass("display"),o.$successBox.hide(),o.$errorBox.removeClass("display"),o.$errorBox.hide(),o.$warningBox.removeClass("display"),o.$warningBox.hide()},o.handleSuccess=function(e){o.$replyForm&&o.clearReplyForm(),o.$section.replaceWith(e.html),o.init(),o.fireListeners()},o.handleError=function(e){e.error?(console.log(o.$errorBox),o.$errorBox.html(e.message),o.$errorBox.show()):(o.$errorBox.html("Error"),o.$errorBox.show())},o.addIdentifier=function(){r('<input type="hidden" name="dustpress_comments_ajax" value="1" />').insertAfter(o.$identifier)},o.clearReplyForm=function(){o.$replyForm&&(o.$replyForm.remove(),o.$replyForm=void 0)},o.stop=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},r(n).ready(o.init),o}(window,document,jQuery)},function(e,n){}]);