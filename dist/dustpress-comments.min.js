!function(e){function n(r){if(o[r])return o[r].exports;var s=o[r]={exports:{},id:r,loaded:!1};return e[r].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}var o={};return n.m=e,n.c=o,n.p="",n(0)}([function(e,n,o){o(1),window.DustPressComments=function(e,n,o){var r={};return r.listeners=[],r.cache=function(){r.postId=comments.post_id,r.formId="#"+comments.form_id,r.statusId="#"+comments.status_id,r.replyLabel=comments.reply_label,r.$section=o("#comments__section"),r.$formContainer=r.$section.find(r.formId+"__container"),r.$commentForm=r.$section.find(r.formId),r.$replyLinks=r.$section.find("a.comment-reply-link"),r.$statusDiv=r.$commentForm.find(r.statusId),r.$identifier=r.$commentForm.find("#dustpress_comments_identifier"),r.cacheMessageBoxes()},r.cacheMessageBoxes=function(e,n){e?(r.$successBox=n.find("#comments__success_"+e),r.$errorBox=n.find("#comments__error_"+e),r.$warningBox=n.find("#comments__warning_"+e)):(r.$successBox=r.$formContainer.find("#comments__success"),r.$errorBox=r.$formContainer.find("#comments__error"),r.$warningBox=r.$formContainer.find("#comments__warning"))},r.init=function(){r.cache(),o.each(r.$replyLinks,r.removeReplyLink),r.listen(),r.displayMessages(),r.addIdentifier()},r.addListener=function(e){r.listeners.push(e)},r.fireListeners=function(){o.each(r.listeners,function(e,n){n.call()})},r.listen=function(){r.$replyLinks.on("click",function(e){r.stop(e),r.hideMessages(),r.addReplyForm(e.target)}),r.$commentForm.submit(r.submit),r.$section.find(".close").on("click",function(e){r.stop(e),r.hideMessages()})},r.addReplyForm=function(e){r.$closest=o(e).closest(".comment");var n=r.$closest.data("id");r.clearReplyForm(),r.$replyForm=r.$formContainer.clone(!0),r.$formContainer.hide();var s=r.$replyForm.find("#reply-title small");r.$replyForm.find("#reply-title").html(r.replyLabel).append(s),r.$replyForm.find("#comment_parent").val(n),r.$replyForm.find("#comments__success").attr("id","comments__success_"+n),r.$replyForm.find("#comments__error").attr("id","comments__error_"+n),r.$replyForm.find("#comments__warning").attr("id","comments__warning_"+n),r.$closest.append(r.$replyForm),r.$replyForm.show(),r.cacheMessageBoxes(n,r.$replyForm),r.$cancelReplyLink=r.$replyForm.find("#cancel-comment-reply-link"),r.$cancelReplyLink.on("click",r.cancelReply),r.$cancelReplyLink.show()},r.cancelReply=function(e){r.stop(e),r.clearReplyForm(),r.cacheMessageBoxes(),r.$formContainer.show()},r.removeReplyLink=function(e,n){n.setAttribute("onclick",null)},r.submit=function(){var e=new FormData(this);return o.ajax({url:r.$commentForm.attr("action"),type:"POST",data:e,success:function(e){var n=JSON.parse(e);n.success?r.handleSuccess(n):r.handleError(n)},cache:!1,contentType:!1,processData:!1}),!1},r.displayMessages=function(){r.$successBox.hasClass("display")&&r.$successBox.show(),r.$errorBox.hasClass("display")&&r.$errorBox.show(),r.$warningBox.hasClass("display")&&r.$warningBox.show()},r.hideMessages=function(){r.$successBox.removeClass("display"),r.$successBox.hide(),r.$errorBox.removeClass("display"),r.$errorBox.hide(),r.$warningBox.removeClass("display"),r.$warningBox.hide()},r.handleSuccess=function(e){r.$replyForm&&r.clearReplyForm(),r.$section.replaceWith(e.html),r.init(),r.fireListeners()},r.handleError=function(e){e.error?(console.log(r.$errorBox),r.$errorBox.html(e.message),r.$errorBox.show()):(r.$errorBox.html("Error"),r.$errorBox.show())},r.addIdentifier=function(){o('<input type="hidden" name="dustpress_comments_ajax" value="1" />').insertAfter(r.$identifier)},r.clearReplyForm=function(){r.$replyForm&&(r.$replyForm.remove(),r.$replyForm=void 0)},r.stop=function(e){e.stopPropagation(),e.preventDefault()},o(n).ready(r.init),r}(window,document,jQuery)},function(e,n){}]);