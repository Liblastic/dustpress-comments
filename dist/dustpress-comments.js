!function(e){function s(t){if(n[t])return n[t].exports;var i=n[t]={exports:{},id:t,loaded:!1};return e[t].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}var n={};return s.m=e,s.c=n,s.p="",s(0)}([function(e,s,n){n(1),"undefined"==typeof window.DustPress&&(window.DustPress={}),window.DustPress.Comments=function(e,s,n){var t={};return t.replyLabel=CommentsData.replyLabel,t.paginationUrl=CommentsData.paginationUrl,t.containers={},t.listeners=[],t.$modified={},t.getLastModified=function(){return t.$modified},t.state="initializing",t.getState=function(){return t.state},t.cache=function(){t.$sections=n(".dustpress-comments"),t.$sections.each(t.initContainer)},t.init=function(){t.cache(),n.each(t.containers,t.listen),n.each(t.containers,t.displayMessages)},t.initContainer=function(e,s){var i=n(s);t.initMessageFields(i),t.identify(i),i.$replyLinks=i.find(".comment-reply-link"),n.each(i.$replyLinks,t.removeWPReplyLink),i.$pagination=i.find(".pagination")},t.initMessageFields=function(e){e.$successBox=e.find(".dustpress-comments__success"),e.$successBoxText=e.$successBox.find(".dustpress-comments__status_message"),e.$errorBox=e.find(".dustpress-comments__error"),e.$errorBoxText=e.$errorBox.find(".dustpress-comments__status_message"),e.$warningBox=e.find(".dustpress-comments__warning"),e.$warningBoxText=e.$warningBox.find(".dustpress-comments__status_message")},t.listen=function(e,s){s.on("click",".comment-reply-link",t.addReplyForm),s.on("click",'input[type="submit"]',t.submit),s.on("click",".close",function(e){t.stop(e),t.hideMessages(s)}),s.$pagination.length&&s.on("click",".paginate",t.paginate)},t.addListener=function(e){"function"==typeof e?t.listeners.push(e):console.log("DustPress Comments: This listener is not a function.",e)},t.fireListeners=function(e){t.state=e;for(var s=0;s<t.listeners.length;s++)t.listeners[s].call(t,t.state,t.$modified)},t.paginate=function(e){t.stop(e);var s=t.$modified=t.containers[e.delegateTarget.id],i=s.data("model");slug=s.data("filterslug"),id=s.data("objectid"),page=n(this).data("page"),t.fireListeners("paginate"),n.ajax({dataType:"json",url:t.paginationUrl,type:"POST",data:{comment_post_ID:id,dustpress_comments_paginate:1,dustpress_comments_ajax:1,dustpress_comments_model:i,dustpress_comments_filter_slug:slug,dustpress_comments_page:page},success:function(e){"object"!=typeof e&&(e=JSON.parse(e)),e.success?t.handleSuccess(e):t.handleError(e)},cache:!1})},t.addReplyForm=function(e){var s=t.$modified=t.containers[e.delegateTarget.id];t.stop(e),t.hideMessages(s);var i=n(e.target).closest(".comment"),r=i.data("id");t.clearReplyForm(s),"undefined"==typeof s.$formContainer&&(s.$formContainer=s.find(".dustpress-comments__form_container")),s.$replyForm=s.$formContainer.clone(!0),s.$formContainer.hide();var o=s.$replyForm.find("#reply-title small");s.$replyForm.find("#reply-title").html(t.replyLabel).append(o),s.$replyForm.find("#comment_parent").val(r),t.initMessageFields(s,s.$replyForm),i.append(s.$replyForm),s.$replyForm.show(),s.$cancelReplyLink=s.$replyForm.find("#cancel-comment-reply-link"),s.on("click","#cancel-comment-reply-link",t.cancelReply),s.$cancelReplyLink.show(),t.fireListeners("reply")},t.cancelReply=function(e){t.stop(e);var s=e.delegateTarget.id,n=t.$modifie=t.containers[s];t.initMessageFields(n),t.clearReplyForm(n),n.$formContainer.show(),t.fireListeners("cancelReply")},t.removeWPReplyLink=function(e,s){s.removeAttribute("onclick")},t.submit=function(e){t.stop(e);var s;if(t.$modified=t.containers[e.delegateTarget.id],t.fireListeners("submit"),FormData){var i=n(this).closest("form");s=new FormData(i.get(0)),n.ajax({dataType:"json",url:i.attr("action"),type:"POST",data:s,success:function(e){"object"!=typeof e&&(e=JSON.parse(e)),e.success?t.handleSuccess(e):t.handleError(e)},cache:!1,contentType:!1,processData:!1})}else console.log(comments.form_data_e);return!1},t.displayMessages=function(e,s){s.$successBox.hasClass("display")&&s.$successBox.show(),s.$errorBox.hasClass("display")&&s.$errorBox.show(),s.$warningBox.hasClass("display")&&s.$warningBox.show()},t.hideMessages=function(e){e.$successBox.removeClass("display"),e.$successBox.hide(),e.$errorBox.removeClass("display"),e.$errorBox.hide(),e.$warningBox.removeClass("display"),e.$warningBox.hide()},t.handleSuccess=function(e){t.clearReplyForm(t.$modified),t.$modified.$replyForm,t.$modified.html(e.html),t.initMessageFields(t.$modified),t.fireListeners("success")},t.handleError=function(e){e.error?(t.$modified.$errorBoxText.html(e.message),t.$modified.$errorBox.show()):(t.$modified.$errorBoxText.html("Error"),t.$modified.$errorBox.show()),t.fireListeners("error")},t.clearReplyForm=function(e){e.$replyForm&&(e.$replyForm.remove(),delete e.$replyForm)},t.stop=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.identify=function(e){var s=t.uniqid();t.containers[s]=e,e.attr("id",s)},t.uniqid=function(e,s){e=e||"",s=s||!1;var n;return this.seed=function(e,s){return e=parseInt(e,10).toString(16),s<e.length?e.slice(e.length-s):s>e.length?new Array(1+(s-e.length)).join("0")+e:e},n=e+this.seed(parseInt((new Date).getTime()/1e3,10),8)+this.seed(Math.floor(123456789*Math.random())+1,5),s&&(n+=(10*Math.random()).toFixed(8).toString()),n},n(s).ready(t.init),t}(window,document,jQuery)},function(e,s){}]);